{

    Layout = null;

}

<!DOCTYPE html>

<html>

<head>
    <meta name="viewport" content="width=device-width" />

    <title>Index</title>

    <link href="~/Scripts/bootstrap.min.css" rel="stylesheet" />

    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
</head>

<body>

    <div id="tblbody">

        <table class="table table-responsive table-striped table-bordered" id="tbldata">

            <thead>

                <tr>

                    <th>ID</th>

                    <th>USER_ID</th>

                    <th>TITLE</th>

                    <th>PRICE</th>

                    <th>CATEGORY</th>
                </tr>

            </thead>

            <tbody id="trow">

                @{

                    Html.RenderAction("PartialAdverts", "Ogloszenia", new { Model = Model });

                }

            </tbody>

        </table>

        <div id="loadingdiv" style="text-align:center;display:none;margin-bottom:20px;">

            <img src="~/Resource/ajax-loader.gif" />

        </div>

    </div>

    <script>

        var pageindex = 2;

        var NoMoredata = false;

        var inProgress = false;

        $(window).scroll(function () {

            if ($(window).scrollTop() > Number($("#tblrow").height()) / 2 && !NoMoredata && !inProgress) {



                inProgress = true;

                $("#loadingdiv").show();

                $.post("@Url.Action("InfiniteScroll","Ogloszenia")", { "pageindex": pageindex },

                    function (data) {

                        pageindex = pageindex  1;

                        NoMoredata = data.NoMoredata;

                        $("#trow").append(data.HTMLString);

                        $("#loadingdiv").hide();

                        inProgress = false;

                    }

                    );

            }

        });

    </script>

</body>

</html>