@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model MajsterFinale.Models.DisplayAdsRepository
@using PagedList;
@using PagedList.Mvc;
<div class="container-fluid cat_main">
    <div class="row">
        <div class="col-md-12 rounded index_searchbar">
            <div class="searchbarbox">
                @using (Html.BeginForm("Wyszukiwanie", "Home", FormMethod.Get))
                {
                    <form action="">
                        <div class="input-group justify-content-center">
                            @Html.TextBox("search", ViewBag.CurrentFilter as string, new { @class = "searchbartext" })
                            <div class="input-group-append">
                                <button class="btn btn-custom" type="submit"><i class="fas fa-search"></i></button>
                            </div>
                        </div>
                    </form>
                }
                
            </div>
        </div>
        <div class="col-md-3 rounded cat_side">
            <div>
                <p><i class="fas fa-chevron-left" style="font-size: 1rem;"><a href="@Url.Action("Index", "Home", null)"> Wróć na Stronę główną</a></i></p>
            </div>

            <br>
            <h3>Główne Kategorie</h3>
            <hr>
            <ul class="nav flex-column">
                <li class="nav-item hovercat">
                    <a class="nav-link" data-toggle="collapse" href="#collapseCat1" role="button" aria-expanded="false" aria-controls="collapseCat1"><i class="fas fa-home" style="color:orange"></i>Dom</a>
                </li>
                <div class="collapse " id="collapseCat1">
                    <ul class="list-unstyled ">
                        <li class="list-item col-sm-12"><a href="@Url.Action("Dom", "Adverts", null)" style="font-weight:600; color:orange"> Wszystkie ogłoszenia</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 2})">Aranżacja Wnętrz</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 3})">Hydraulika</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 4})">Elektryka</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 5})">Gazownictwo</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 6})">Malarstwo</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 7})">Kominiarstwo</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 8})">Stolarstwo</a></li>
                        <li class="list-item col-sm-12"><a href="@Url.Action("Kategorie", "Adverts", new { id = 9})">Dom Inne</a></li>
                    </ul>
                </div>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="collapse" href="#collapseCat2" role="button" aria-expanded="false" aria-controls="collapseCat2"><i class="fas fa-leaf" style="color:green"></i>Ogród</a>
                </li>
                <div class="collapse " id="collapseCat2">
                    <ul class="list-unstyled ">
                        <li class="list-item col-sm-12"><a href="@Url.Action("Ogrod", "Adverts", null)" style="font-weight:600; color:green"> Wszystkie ogłoszenia</a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 10})"> Aranżacja Ogrodów </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 11})"> Ogrodnictwo </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 12})"> Brukarstwo </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 13})"> Ogrodzenia </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 14})"> Kamieniarstwo </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 8})"> Stolarstwo </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 15})"> Ogród Inne </a></li>
                    </ul>
                </div>
                <li class="nav-item ">
                    <a class="nav-link" data-toggle="collapse" href="#collapseCat3" role="button" aria-expanded="false" aria-controls="collapseCat3"><i class="fas fa-car" style="color:blue"></i>Motoryzacja</a>
                </li>
                <div class="collapse underCat" id="collapseCat3">
                    <ul class="list-unstyled">
                        <li class="list-item col-sm-12"><a href="@Url.Action("Motoryzacja", "Adverts", null)" style="font-weight: bold; color:blue;"> Wszystkie ogłoszenia</a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 16})"> Mechanik </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 17})"> Blacharz </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 18})"> Lakiernik </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 19})"> Detaling </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 20})"> Wulkanizacja </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 21})"> Motoryzacja Inne </a></li>
                    </ul>
                </div>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="collapse" href="#collapseCat4" role="button" aria-expanded="false" aria-controls="collapseCat4"><i class="fas fa-concierge-bell" style="color:purple"></i>Usługi</a>
                </li>
                <div class="collapse underCat" id="collapseCat4">
                    <ul class="list-unstyled underCat">
                        <li class="list-item col-sm-12"><a href="@Url.Action("Uslugi", "Adverts", null)" style="font-weight: bold; color:purple;"> Wszystkie ogłoszenia</a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 22})"> Korepetycje </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 23})"> Informatyka </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 24})"> Uroda </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 25})"> Naprawa i Serwis </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 26})"> Transport </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 27})"> Monter </a></li>
                        <li class="list-item col-sm-6"><a href="@Url.Action("Kategorie", "Adverts", new { id = 28})"> Usługi Inne </a></li>
                    </ul>
                </div>
                <li class="nav-item">
                    <a class="nav-link" href="#"><i class="fas fa-book" style="color:cornflowerblue"></i>Inne</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"></a>
                </li>
            </ul>

        </div>
        <div class="col-md-9 ">
            <div class="col-12 rounded cat_adv">

                <h2>Ogłoszenia</h2>
                <a>@Html.ActionLink("Sortuj po Nazwie", "Wyszukiwanie", new { sortOrder = ViewBag.NameSortParm, currentFilter = ViewBag.CurrentFilter }) \ </a>

                <a>@Html.ActionLink("Sortuj po Cenie", "Wyszukiwanie", new { sortOrder = ViewBag.PriceSortParm, currentFilter = ViewBag.CurrentFilter }) \ </a>

                <a>@Html.ActionLink("Sortuj po Dacie", "Wyszukiwanie", new { sortOrder = ViewBag.DateSortParm, currentFilter = ViewBag.CurrentFilter })</a>

                @{
                    bool print = true;
                }
                @foreach (var item in Model.ADVERTS)
                {
                    print = true;
                    <div class="card bg-light border-0 mb-2">
                        <div class="card-horizontal p-2">
                            <div class="img-square-wrapper">
                                @foreach (var itemImage in Model.IMAGES)
                                {
                                    if (item.ID == itemImage.ADVERT_ID)
                                    {
                                        if (print == true)
                                        {
                                            <img src="@itemImage.IMAGE_PATH" style="width: 200px; height: 200px" alt="my pic" />
                                            print = false;
                                        }
                                    }
                                }
                            </div>
                            <div class="card-body">
                                <div style="float:left">
                                    <h4 class="card-title"><a href="@Url.Action("Details", "Adverts", new { id = item.ID })">@Html.DisplayFor(modelItem => item.TITLE)</a></h4>
                                    <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                                </div>
                                <div style="float:right">
                                    @if (item.PRICE == "0")
                                    {
                                        <span>Cena do ustalenia</span>
                                    }
                                    else
                                    {
                                        @Html.DisplayFor(x => item.PRICE)
                                    }
                                </div>
                                <div style="position: absolute;bottom: 0;">
                                    <h6 class="card-subtitle mb-2 text-muted">@Html.DisplayFor(modelItem => item.DATE)</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                <div class="col-md-12 text-center" style="background-color:transparent;">
                    Page @(Model.ADVERTS.PageCount < Model.ADVERTS.PageNumber ? 0 : Model.ADVERTS.PageNumber) of @Model.ADVERTS.PageCount

                    @Html.PagedListPager(Model.ADVERTS, page => Url.Action("Wyszukiwanie",
                        new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))
                </div>
            </div>
        </div>
    </div>
</div>





<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>